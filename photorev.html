<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CIVOPS Labs // Visual Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/styles/photorevstyle.css">
</head>
<body class="h-screen flex flex-col">

    <header class="h-14 bg-slate-900 border-b border-slate-700 flex items-center justify-between px-4 z-10 shadow-lg">
        <div class="flex items-center gap-2">
            <i data-lucide="scan-eye" class="text-sky-500 w-6 h-6"></i>
            <h1 class="text-sky-400 font-bold tracking-wider text-sm md:text-base">FORENSIC<span class="text-slate-500">LAB</span> // v1.0.LOCAL</h1>
        </div>
        
        <div class="flex items-center gap-4">
            <span class="text-xs text-emerald-500 hidden md:flex items-center gap-1">
                <i data-lucide="shield-check" class="w-3 h-3"></i> PRIVACIDADE ATIVA: LOCAL
            </span>
            <button onclick="document.getElementById('fileInput').click()" class="bg-sky-600 hover:bg-sky-500 text-white text-xs px-4 py-2 rounded shadow transition-colors flex items-center gap-2 font-bold">
                <i data-lucide="upload" class="w-4 h-4"></i> CARREGAR EVIDÊNCIA
            </button>
            <input type="file" id="fileInput" accept="image/*" class="hidden">
            <button id="downloadBtn" class="bg-slate-700 hover:bg-slate-600 text-white text-xs px-3 py-2 rounded shadow transition-colors" title="Baixar Resultado">
                <i data-lucide="download" class="w-4 h-4"></i>
            </button>
        </div>
    </header>

    <main class="flex-1 flex overflow-hidden relative">
        
        <aside class="w-full md:w-80 bg-slate-900 border-r border-slate-700 flex flex-col overflow-y-auto z-20 custom-scrollbar absolute md:relative h-full transition-transform transform -translate-x-full md:translate-x-0" id="sidebar">
            
            <div class="p-4 border-b border-slate-800 bg-slate-950">
                <div class="flex justify-between items-end mb-1">
                    <span class="text-[10px] text-slate-500 uppercase">Input Signal</span>
                    <span class="text-[10px] text-emerald-500" id="resolution-display">0 x 0 px</span>
                </div>
                <div class="h-8 flex items-end gap-[2px]">
                    <div class="w-1 bg-slate-700 h-full"></div>
                    <div class="w-1 bg-slate-600 h-3/4"></div>
                    <div class="w-1 bg-sky-900 h-1/2"></div>
                    <div class="w-1 bg-sky-700 h-2/3"></div>
                    <div class="w-1 bg-sky-500 h-full"></div>
                    <div class="w-1 bg-sky-600 h-4/5"></div>
                    <div class="w-1 bg-slate-600 h-1/3"></div>
                    <div class="w-1 bg-slate-800 h-1/4"></div>
                </div>
            </div>

            <div class="p-4 border-b border-slate-700">
                <h3 class="text-xs font-bold text-sky-500 mb-3 flex items-center gap-2 uppercase tracking-widest">
                    <i data-lucide="cpu" class="w-3 h-3"></i> Protocolos Automáticos
                </h3>
                <div class="grid grid-cols-2 gap-2">
                    <button onclick="applyPreset('reset')" class="text-xs bg-slate-800 hover:bg-slate-700 border border-slate-600 text-slate-300 py-2 rounded transition">Original</button>
                    <button onclick="applyPreset('text_reveal')" class="text-xs bg-slate-800 hover:bg-sky-900 border border-slate-600 hover:border-sky-500 text-sky-200 py-2 rounded transition">Texto Oculto</button>
                    <button onclick="applyPreset('high_contrast')" class="text-xs bg-slate-800 hover:bg-slate-700 border border-slate-600 text-slate-300 py-2 rounded transition">Alto Contraste</button>
                    <button onclick="applyPreset('edge_detect')" class="text-xs bg-slate-800 hover:bg-slate-700 border border-slate-600 text-slate-300 py-2 rounded transition">Bordas (Sobel)</button>
                    <button onclick="applyPreset('inverted')" class="text-xs bg-slate-800 hover:bg-slate-700 border border-slate-600 text-slate-300 py-2 rounded transition">Negativo/X-Ray</button>
                    <button onclick="applyPreset('shadows')" class="text-xs bg-slate-800 hover:bg-slate-700 border border-slate-600 text-slate-300 py-2 rounded transition">Resgatar Sombras</button>
                </div>
            </div>

            <div class="p-4 space-y-5">
                <h3 class="text-xs font-bold text-sky-500 mb-2 flex items-center gap-2 uppercase tracking-widest">
                    <i data-lucide="sliders" class="w-3 h-3"></i> Sintonia Fina
                </h3>

                <div>
                    <div class="flex justify-between text-xs mb-1">
                        <span>Exposição</span>
                        <span id="val-exposure" class="text-sky-400">1.0</span>
                    </div>
                    <input type="range" min="0" max="5" step="0.1" value="1" class="range-slider" data-filter="exposure">
                </div>

                <div>
                    <div class="flex justify-between text-xs mb-1">
                        <span>Contraste</span>
                        <span id="val-contrast" class="text-sky-400">1.0</span>
                    </div>
                    <input type="range" min="0" max="5" step="0.1" value="1" class="range-slider" data-filter="contrast">
                </div>

                <div>
                    <div class="flex justify-between text-xs mb-1">
                        <span>Brilho (Offset)</span>
                        <span id="val-brightness" class="text-sky-400">0</span>
                    </div>
                    <input type="range" min="-100" max="100" step="1" value="0" class="range-slider" data-filter="brightness">
                </div>

                 <div>
                    <div class="flex justify-between text-xs mb-1">
                        <span>Gamma (Meios-tons)</span>
                        <span id="val-gamma" class="text-sky-400">1.0</span>
                    </div>
                    <input type="range" min="0.1" max="3.0" step="0.1" value="1" class="range-slider" data-filter="gamma">
                </div>

                <div class="pt-2 border-t border-slate-800">
                    <div class="flex justify-between text-xs mb-1">
                        <span class="text-emerald-400">Limiar (Threshold)</span>
                        <span id="val-threshold" class="text-emerald-400">OFF</span>
                    </div>
                    <input type="range" min="-1" max="255" step="1" value="-1" class="range-slider" data-filter="threshold">
                    <p class="text-[10px] text-slate-500 mt-1">*Defina > 0 para ativar modo binário</p>
                </div>

                <div class="pt-2">
                    <div class="flex justify-between text-xs mb-1">
                        <span>Nitidez (Sharpen)</span>
                        <span id="val-sharpen" class="text-sky-400">0</span>
                    </div>
                    <input type="range" min="0" max="10" step="1" value="0" class="range-slider" data-filter="sharpen">
                </div>

                <div class="pt-2 border-t border-slate-800">
                    <p class="text-xs mb-2">Isolamento de Canal</p>
                    <div class="flex gap-2">
                        <button class="flex-1 py-1 text-[10px] border border-red-900 text-red-500 bg-slate-900 hover:bg-red-900/20 channel-btn rounded" data-channel="r">RED</button>
                        <button class="flex-1 py-1 text-[10px] border border-green-900 text-green-500 bg-slate-900 hover:bg-green-900/20 channel-btn rounded" data-channel="g">GRN</button>
                        <button class="flex-1 py-1 text-[10px] border border-blue-900 text-blue-500 bg-slate-900 hover:bg-blue-900/20 channel-btn rounded" data-channel="b">BLU</button>
                        <button class="flex-1 py-1 text-[10px] border border-slate-600 text-slate-400 bg-slate-800 hover:bg-slate-700 active channel-btn rounded" data-channel="all">ALL</button>
                    </div>
                </div>

                <div class="pt-4 pb-12">
                     <button onclick="processImage()" class="w-full bg-sky-900/30 border border-sky-700 text-sky-400 hover:bg-sky-900/50 py-2 rounded text-xs font-bold transition">
                        RE-RENDERIZAR
                    </button>
                    <p class="text-[10px] text-center mt-2 text-slate-600">Renderização em tempo real</p>
                </div>
            </div>
        </aside>

        <button id="toggleSidebar" class="absolute bottom-4 left-4 z-50 md:hidden bg-sky-600 text-white p-3 rounded-full shadow-lg">
            <i data-lucide="settings-2"></i>
        </button>

        <section class="flex-1 relative bg-slate-950 canvas-container flex items-center justify-center overflow-hidden">
            
            <div id="emptyState" class="text-center p-8 opacity-50">
                <i data-lucide="file-search" class="w-16 h-16 mx-auto mb-4 text-slate-600"></i>
                <h2 class="text-xl text-slate-400 font-bold mb-2">AGUARDANDO EVIDÊNCIA</h2>
                <p class="text-sm text-slate-600 max-w-md">Carregue uma imagem para iniciar a análise espectral e de pixel. O processamento é 100% local.</p>
            </div>

            <div id="canvasWrapper" class="hidden shadow-2xl border border-slate-700 transition-transform origin-center cursor-move">
                <canvas id="mainCanvas"></canvas>
            </div>

            <div class="absolute bottom-6 right-6 flex flex-col gap-2 z-40">
                <button onclick="adjustZoom(0.1)" class="bg-slate-800 hover:bg-slate-700 text-slate-200 p-2 rounded shadow border border-slate-600">
                    <i data-lucide="zoom-in" class="w-4 h-4"></i>
                </button>
                <button onclick="resetZoom()" class="bg-slate-800 hover:bg-slate-700 text-slate-200 p-2 rounded shadow border border-slate-600 text-xs font-bold">
                    1:1
                </button>
                <button onclick="adjustZoom(-0.1)" class="bg-slate-800 hover:bg-slate-700 text-slate-200 p-2 rounded shadow border border-slate-600">
                    <i data-lucide="zoom-out" class="w-4 h-4"></i>
                </button>
            </div>
            
            <div class="absolute inset-0 scanlines pointer-events-none z-30 opacity-20"></div>
        </section>

    </main>

    <script src="assets/scripts/photorevscript.js"></script>
</body>
</html>